{"ast":null,"code":"import SockJS from 'sockjs-client';\nimport { Stomp } from '@stomp/stompjs'; // Here is code responsible for websockets functionality\n// like send message, handle websocket, connect and disconnect\n\nvar stompClient = null;\nvar handlers = [];\nexport function connect() {\n  var socket = new SockJS('http://localhost:8080/ownsite'); // connecting to the Spring server\n\n  stompClient = Stomp.over(socket);\n\n  stompClient.debug = function () {};\n\n  stompClient.connect({}, function (frame) {\n    stompClient.subscribe('/topic/method', function (message) {\n      handlers.forEach(function (handler) {\n        return handler(JSON.parse(message.body));\n      });\n    });\n  });\n  console.log('Connected');\n}\nexport function addHandler(handler) {\n  handlers.push(handler);\n}\nexport function disconnect() {\n  if (stompClient !== null) {\n    stompClient.disconnect();\n  }\n\n  console.log(\"Disconnected\");\n}\nexport function sendMsg(message) {\n  stompClient.send(\"/app/hello\", {}, JSON.stringify(message)); // send message on specified address\n\n  console.log(\"Sent\");\n}\n/*\r\n    Убрать лишний код из МР-а\r\n*/","map":{"version":3,"sources":["C:/Ghub/freelancer_portal/Frontend/src/util/ws.js"],"names":["SockJS","Stomp","stompClient","handlers","connect","socket","over","debug","frame","subscribe","message","forEach","handler","JSON","parse","body","console","log","addHandler","push","disconnect","sendMsg","send","stringify"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,eAAnB;AACA,SAASC,KAAT,QAAsB,gBAAtB,C,CAEA;AACA;;AAEA,IAAIC,WAAW,GAAG,IAAlB;AACA,IAAMC,QAAQ,GAAG,EAAjB;AAEA,OAAO,SAASC,OAAT,GAAmB;AACtB,MAAMC,MAAM,GAAG,IAAIL,MAAJ,CAAW,+BAAX,CAAf,CADsB,CACqC;;AAC3DE,EAAAA,WAAW,GAAGD,KAAK,CAACK,IAAN,CAAWD,MAAX,CAAd;;AACAH,EAAAA,WAAW,CAACK,KAAZ,GAAoB,YAAM,CAAE,CAA5B;;AACAL,EAAAA,WAAW,CAACE,OAAZ,CAAoB,EAApB,EAAwB,UAAAI,KAAK,EAAI;AAC7BN,IAAAA,WAAW,CAACO,SAAZ,CAAsB,eAAtB,EAAuC,UAAAC,OAAO,EAAI;AAC9CP,MAAAA,QAAQ,CAACQ,OAAT,CAAiB,UAAAC,OAAO;AAAA,eAAIA,OAAO,CAACC,IAAI,CAACC,KAAL,CAAWJ,OAAO,CAACK,IAAnB,CAAD,CAAX;AAAA,OAAxB;AACH,KAFD;AAGH,GAJD;AAKAC,EAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACH;AAED,OAAO,SAASC,UAAT,CAAoBN,OAApB,EAA6B;AAChCT,EAAAA,QAAQ,CAACgB,IAAT,CAAcP,OAAd;AACH;AAED,OAAO,SAASQ,UAAT,GAAsB;AACzB,MAAIlB,WAAW,KAAK,IAApB,EAA0B;AACtBA,IAAAA,WAAW,CAACkB,UAAZ;AACH;;AACDJ,EAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACH;AAED,OAAO,SAASI,OAAT,CAAiBX,OAAjB,EAA0B;AAC7BR,EAAAA,WAAW,CAACoB,IAAZ,CAAiB,YAAjB,EAA+B,EAA/B,EAAmCT,IAAI,CAACU,SAAL,CAAeb,OAAf,CAAnC,EAD6B,CAC+B;;AAC5DM,EAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACH;AAGD","sourcesContent":["import SockJS from 'sockjs-client'\r\nimport { Stomp } from '@stomp/stompjs'\r\n\r\n// Here is code responsible for websockets functionality\r\n// like send message, handle websocket, connect and disconnect\r\n\r\nlet stompClient = null\r\nconst handlers = []\r\n\r\nexport function connect() {\r\n    const socket = new SockJS('http://localhost:8080/ownsite') // connecting to the Spring server\r\n    stompClient = Stomp.over(socket)\r\n    stompClient.debug = () => {}\r\n    stompClient.connect({}, frame => {\r\n        stompClient.subscribe('/topic/method', message => {\r\n            handlers.forEach(handler => handler(JSON.parse(message.body)))\r\n        })\r\n    })\r\n    console.log('Connected')\r\n}\r\n\r\nexport function addHandler(handler) {\r\n    handlers.push(handler)\r\n}\r\n\r\nexport function disconnect() {\r\n    if (stompClient !== null) {\r\n        stompClient.disconnect()\r\n    }\r\n    console.log(\"Disconnected\")\r\n}\r\n\r\nexport function sendMsg(message) {\r\n    stompClient.send(\"/app/hello\", {}, JSON.stringify(message)) // send message on specified address\r\n    console.log(\"Sent\")\r\n}\r\n\r\n\r\n/*\r\n    Убрать лишний код из МР-а\r\n*/ "]},"metadata":{},"sourceType":"module"}